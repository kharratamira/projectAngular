<div class="container mt-4">
    <h2>Liste des Demandes de Contrat</h2>
  
    <!-- Barre de recherche -->
    <div class="mb-3">
      <input type="text" [(ngModel)]="searchText" class="form-control" placeholder="Rechercher...">
    </div>
  
    <!-- Loading -->
    <div *ngIf="isLoading" class="text-center my-4">
      <div class="spinner-border" role="status">
        <span class="visually-hidden">Chargement...</span>
      </div>
    </div>
  
    <!-- Tableau des demandes -->
    <div class="table-responsive" *ngIf="!isLoading && filteredDemandes.length > 0">
      <table class="table table-striped table-bordered">
        <thead>
          <tr>
            <th>ID</th>
            <th>Description</th>
            <th>Statut</th>
            <th>Client</th>
            <th>Entreprise</th>
            <th>Date de Demande</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let demande of filteredDemandes | paginate: { itemsPerPage: itemsPerPage, currentPage: currentPage }">
            <td>{{ demande.id }}</td>
            <td>{{ demande.description }}</td>
            <td>
              <span [ngClass]="{
                'badge bg-warning': demande.statut === 'EN_ATTENTE',
                'badge bg-success': demande.statut === 'VALIDEE',
                'badge bg-danger': demande.statut === 'REJETEE'
              }">
                {{ demande.statut }}
              </span>
            </td>
            <td>{{ demande.client?.email }}</td>
            <td>{{ demande.client?.entreprise }}</td>
            <td>{{ demande.dateDemande | date:'dd/MM/yyyy HH:mm' }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  
    <!-- Pagination -->
    <div class="d-flex justify-content-center" *ngIf="!isLoading && filteredDemandes.length > 0">
      <pagination-controls
        (pageChange)="currentPage = $event"
        previousLabel="Précédent"
        nextLabel="Suivant"
        [responsive]="true">
      </pagination-controls>
    </div>
  
    <!-- Message si vide -->
    <div *ngIf="!isLoading && filteredDemandes.length === 0" class="alert alert-info">
      Aucune demande de contrat trouvée.
    </div>
  </div>
  